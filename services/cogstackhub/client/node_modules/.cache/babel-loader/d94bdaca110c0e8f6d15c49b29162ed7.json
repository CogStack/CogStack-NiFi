{"remainingRequest":"/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/node_modules/babel-loader/lib/index.js!/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/node_modules/eslint-loader/index.js??ref--13-0!/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/store/auth.js","dependencies":[{"path":"/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/store/auth.js","mtime":1612050067597},{"path":"/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwoKLyplc2xpbnQtZGlzYWJsZSovCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi4vc3JjL3JvdXRlcic7CnZhciBzdGF0ZSA9IHsKICAvLyBzaW5nbGUgc291cmNlIG9mIGRhdGEKICB1c2VyOiB7fSwKICBqd3Q6ICcnCn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBsb2dpbkRldGFpbHMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciB1c2VybmFtZSA9IGxvZ2luRGV0YWlsc1sndXNlcm5hbWUnXTsKICAgIHZhciBwYXNzd29yZCA9IGxvZ2luRGV0YWlsc1sncGFzc3dvcmQnXTsKICAgIHZhciBwYXRoID0gJ2h0dHA6Ly8xMjcuMC4wLjEnICsgJzo1MDAxL2xvZ2luJzsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGF4aW9zLnBvc3QocGF0aCwgewogICAgICAgICd1c2VybmFtZSc6IHVzZXJuYW1lLAogICAgICAgICdwYXNzd29yZCc6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbW1pdCgnYXV0aFVzZXInLCB7CiAgICAgICAgICB1c2VyOiB1c2VybmFtZSwKICAgICAgICAgIGp3dDogcmVzLmRhdGEudG9rZW4KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzZnVsbHkgbG9nZ2VkIGluLi4uJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2p3dCcsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaXNBZG1pbicsIHJlcy5kYXRhLmlzQWRtaW4pOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgdXNlcm5hbWUpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JjZVJlZnJlc2gnLCAncmVmcmVzaCcpOwogICAgICAgIHJlc29sdmUoewogICAgICAgICAgJ3Jlc3VsdCc6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygnZmFpbGVkIGxvZyBpbi4uLicpOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgcmVmcmVzaHRva2VuOiBmdW5jdGlvbiByZWZyZXNodG9rZW4oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0Jyk7CiAgICB2YXIgcGF0aCA9ICdodHRwOi8vMTI3LjAuMC4xJyArICc6NTAwMS9yZWZyZXNodG9rZW4nOwogICAgYXhpb3MucG9zdChwYXRoLCB7CiAgICAgICd1c2VyJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKQogICAgfSwgewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnand0JykKICAgICAgfQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIGNvbW1pdCgnYXV0aFVzZXInLCB7CiAgICAgICAgdXNlcjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSwKICAgICAgICBqd3Q6IHJlcy5kYXRhLnRva2VuCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygnc3VjY2VzZnVsbHkgcmVmcmVzaGVkIHRva2VuLi4uJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdqd3QnLCByZXMuZGF0YS50b2tlbik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsvLyAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7IAogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgIGNvbW1pdCgnY2xlYXJBdXRoRGF0YScpOwogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdqd3QnKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmb3JjZVJlZnJlc2gnLCAnJyk7CiAgICByb3V0ZXIucmVwbGFjZSgnbG9naW4nKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgYXV0aFVzZXI6IGZ1bmN0aW9uIGF1dGhVc2VyKHN0YXRlLCB1c2VyRGF0YSkgewogICAgc3RhdGUudXNlciA9IHVzZXJEYXRhLnVzZXJuYW1lOwogICAgc3RhdGUuand0ID0gdXNlckRhdGEudG9rZW47CiAgICBzdGF0ZS5mb3JjZVJlZnJlc2ggPSBmYWxzZTsKICB9LAogIGNsZWFyQXV0aERhdGE6IGZ1bmN0aW9uIGNsZWFyQXV0aERhdGEoc3RhdGUpIHsKICAgIHN0YXRlLnVzZXIgPSBudWxsOwogICAgc3RhdGUuand0ID0gbnVsbDsKICAgIHN0YXRlLmZvcmNlUmVmcmVzaCA9IHRydWU7CiAgfQp9Owp2YXIgZ2V0dGVycyA9IHsKICAvLyByZXVzYWJsZSBkYXRhIGFjY2Vzc29ycwogIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHN0YXRlKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2p3dCcpKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSAvLyAgIHJldHVybiBpc1ZhbGlkSnd0KHN0YXRlLmp3dC50b2tlbikKCiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"sources":["/Users/kawsarnoor/Desktop/cogstack/cogstackhub/client/store/auth.js"],"names":["axios","router","state","user","jwt","actions","login","loginDetails","commit","username","password","path","Promise","resolve","reject","post","then","res","data","token","console","log","localStorage","setItem","isAdmin","catch","error","refreshtoken","getItem","headers","logout","removeItem","replace","mutations","authUser","userData","forceRefresh","clearAuthData","getters","isAuthenticated","namespaced"],"mappings":"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","sourcesContent":["/*eslint-disable*/\n\nimport axios from 'axios';\nimport router from '../src/router'\n\nconst state = {\n    // single source of data\n    user: {},\n    jwt: ''\n};\n\nconst actions = {\n    login: ({commit}, loginDetails) => {\n        var username = loginDetails['username']\n        var password = loginDetails['password'] \n        const path = 'http://127.0.0.1' + ':5001/login';\n\n        return new Promise((resolve, reject) => {\n\t\t\taxios.post(path, {'username':username, 'password':password})\n\t\t\t\t.then(res => {\n\t\t\t\tcommit('authUser', { user: username, jwt: res.data.token });\t\n\t\t\t\tconsole.log('succesfully logged in...');\n\n\t\t\t\tlocalStorage.setItem('jwt', res.data.token);\n\t\t\t\tlocalStorage.setItem('isAdmin', res.data.isAdmin);\n\t\t\t\tlocalStorage.setItem('user', username);\n\t\t\t\tlocalStorage.setItem('forceRefresh', 'refresh');\n\n\t\t\t\tresolve({'result': 'success'})\n\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.log('failed log in...');\n\t\t\t\tconsole.log(error);\n\t\t\t\treject(error);\n            });  \n        })\n \n\t},\n\t\n\trefreshtoken: ({commit}) => {\n\t\tlet token = localStorage.getItem('jwt');\n\t\tconst path = 'http://127.0.0.1' + ':5001/refreshtoken';\n\t\t\n        axios.post(path, {'user': localStorage.getItem('user')}, {headers: {'Authorization': localStorage.getItem('jwt')}})\n            .then(res => {\n\t\t\t  commit('authUser', { user: localStorage.getItem('user'), jwt: res.data.token });\t\n              console.log('succesfully refreshed token...');\n\n\t\t\t  localStorage.setItem('jwt', res.data.token);\n\t\t\t  localStorage.setItem('user', localStorage.getItem('user'));\n            })\n            .catch((error) => {\n\t\t\t//    router.push('/login'); \n            });\n\t},\n\n\tlogout: ({commit}) => {\n\t\tcommit('clearAuthData');\n\t\tlocalStorage.removeItem('user');\n\t\tlocalStorage.removeItem('jwt');\n\t\tlocalStorage.setItem('forceRefresh', '');\n\t\trouter.replace('login');\n\t},\n};\n\nconst mutations = {\n\tauthUser(state, userData) {\n\t\tstate.user = userData.username;\n\t\tstate.jwt = userData.token;\n\t\tstate.forceRefresh = false;\n\t},\n\tclearAuthData(state) {\n\t\tstate.user = null;\n\t\tstate.jwt = null;\n\t\tstate.forceRefresh = true;\n\t},\n};\n\nconst getters = {\n    // reusable data accessors\n    isAuthenticated (state) {\n\t  if (localStorage.getItem('jwt')){\n          return true;\n\t  } else {\n\t\t  return false;\n\t  }\n    //   return isValidJwt(state.jwt.token)\n    }\n};\n\nexport default {\n\tnamespaced: true,\n\tstate,\n\tmutations,\n\tgetters,\n\tactions,\n}\n\n"]}]}